TinyMUX 2.4:  CHANGES
Last Update:  September 2004

Major changes that may affect performance and require softcode tweaks:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 -- The units on the timeslice configuration option have changed from
    milliseconds to seconds.  But, seconds can be expressed as a
    fraction whereas milliseconds could only be expressed as an
    integer, so this change doesn't take any capability away.
 -- Control over WOD Realms, Memory-Based, and other build options
    have been pulled back into the ./configure script.  The README
    files refer to the new methods, and ./configure --help gives a list.
    Also, gmake is no longer necessary for *BSD flavors.
 -- The behavior of case() is closer to switch().  The patterns are now
    evaluated.  The #$ substitution is also made.


Feature Additions:
~~~~~~~~~~~~~~~~~
 -- Added support for multi-character delimiters across nearly all
    functions which accept input or output delimiters.  For example,
    'iter(1%r2%r3,itext(),%r,|)' produces '1|2|3'.
 -- Added 'reset_players' configuration option which resets the player
    connection record.
 -- Added 'user_attrib_per_hour' which limits the rate at which
    user-defined attribute names are created.
 -- Added 'mail_per_hour' which limits the rate at which @mail can be
    created.
 -- Add output delimiter to elements(), extract(), filter(),
    filterbool(), graball(), remove(), shuffle(), sortby(), and
    splice().
 -- Connection, disconnection, partial, and suspect emits now show the
    player's @moniker.
 -- Added lag_limit configuration option to control how long the
    server will service commands.  The execution of expensive commands
    is abbreviated, and the queue is drained, and the executor is
    @set HALTED.  lag_maximum continues to be the reporting threshold.
 -- On Win32, use higher-quality time from QueryPerformanceCounter()
    instead of GetSystemTimeAsFileTime().  As soon as the error from
    using QueryPerformanceCounter() drops below 5ms, the server
    switches to using it as a time source.  So, if you are doing any
    softcode profiling on Win32, you need to wait a few seconds after
    the server is started before beginning your tests.
 -- Updated PCRE from version 4.2 to version 4.5.
 -- Added BXOR() function.
 -- Added siteadmin @power to permit mortals to operate @shutdown and
    @restart.  The idea is that the site administrator will have access
    to the shell account, but may also need access to site-related
    facilaties within the game.
 -- Add FCOUNT() and FDEPTH() for softcode access to function invocation
    and nesting counters.
 -- Added POWERS() function to return a space-delimited list of powers.
    PennMUSH implement this first.
 -- Added some plumbing for SQL.  There is no way to make SQL queries,
    but @ps would show them if there were.  @halt and @kick would also
    interact with them.
 -- Added CHOOSE().  CHOOSE() is like PICKRAND() except that the
    distribution is weighted.  The idea was originally implemented by
    Catherine@Firan.  The code included here is based on a
    re-implementation of that in TM3.1 by Lydia.
 -- Added TEXTFILE() to allow easier softcode access to helpfile topics.
    Re-implemented from TM3.1 help topic.  Originally from PennMUSH.
 -- Added guests_channel_alias and public_channel_alias configuration
    options.
 -- Extended behavior of MID() to more easily cover the LEFT() and
    RIGHT() behaviors.
 -- Added optional second argument to RAND().
 -- Added patch surface for BTMUX.
 -- @teleport/list accepts a space-delimited list of objects to
    teleport.
 -- Added cemit().  Also, changed the permission control so that any
    object that controls the channel owner can use cemit()/@cemit.
 -- vadd() now allows addition of a vector by a scalar similiar to
    vmul().
 -- Remove the 20-argument limit from the vector functions.


Bug Fixes:
~~~~~~~~~
 -- Solaris build needed a missing HAVE_FCNTL_H.
 -- First argument argument of udefault(), edefault(), and default()
    supported <dbref>/<attrname>, but not just <attrname>.  But
    introduced in MUX 2.2 timeframe.
 -- While the server hasn't allowed mail aliases (@malias) larger than
    100 members for awhile, it did not protect itself properly against
    mail aliases saved in older mail.db files.
 -- @backup now works with MEMORY_BASED build.
 -- Added missing @fsay help topic.
 -- Added more messages to @destroy/instant path.
 -- Guest attributes weren't being wiped as intended.
 -- Fixed @hook IGSWITCH again.  This time, the bug is related to the
    search_nametab() interface.
 -- Fix @notify/foo123 where foo123 is a never-before-used attributes.
    Legacy bug from MUX 1.6.
 -- Tightend up command piping to log expensive piped commands and also
    improve the interaction with @break and lag_limit.
 -- Fixed bug in MIX() where '&mixit me=(%0|%1);think mix(mixit,0 1,1)'
    gives '(0|1)' instead of '(0|1) (1|)'.  It wasn't determining the
    length of the first list correctly.
 -- Allow code on rooms to use @oemit.
 -- Move initialization of time code further up so that the logging
    code creates the right timestamp.
 -- @dbck started fixing quotas in MUX 2.3, but this is too expensive
    to do routinely.
 -- Locks failed to evaluate properly after a dbref within the lock was
    @destroy.
 -- Add ',()^$' to the set of characters escaped by ESCAPE().
 -- Fix unlikely but reproducible case of hanging @dump/@backup.
 -- Fixed suggestions/bugs from static analysis tool.
 -- Fixed some 64-bit warnings.
 -- Release comsys and @mail properly for guests.
 -- Document the see_hidden @power.
 -- Attribute permissions are documented more completely in the
    'attribute permission' topic.
 -- Clarified help topics 'helpfile' and 'raw_helpfile'.
 -- The minimal set of guests were never being added back to the Guests
    channel.


Performance Enhancements:
~~~~~~~~~~~~~~~~~~~~~~~~
 -- Re-worked update_quotas() so that mudstate.now could be removed.
 -- Use nanosleep() or usleep() on Unix if available.
 -- Pulled alloc/free pairs outside an inner loop in switch() and
    fold().


Cosmetic Changes:
~~~~~~~~~~~~~~~~
 -- Increased the space available to WHO for @moniker names to provide
    more room for more ANSI transitions.


Miscellaneous:
~~~~~~~~~~~~~
 -- Added ATTACK notes.
